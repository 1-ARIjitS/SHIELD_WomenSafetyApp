Index: app/src/main/java/com/example/womensafety/Activities/OtpVerification.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.womensafety.Activities;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.womensafety.R;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.FirebaseException;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.PhoneAuthCredential;\r\nimport com.google.firebase.auth.PhoneAuthOptions;\r\nimport com.google.firebase.auth.PhoneAuthProvider;\r\n\r\nimport java.util.concurrent.TimeUnit;\r\n\r\npublic class OtpVerification extends AppCompatActivity {\r\n\r\n    Button btnSignIn;\r\n\r\n    EditText etOTP;\r\n\r\n    String otp;\r\n\r\n    FirebaseAuth auth;\r\n\r\n    PhoneAuthProvider.OnVerificationStateChangedCallbacks mCallback;\r\n    private String verificationCode;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_otp_verification);\r\n        findViews();\r\n\r\n        StartFirebaseLogin();\r\n        Intent intent = getIntent();\r\n        String phoneNumber = intent.getStringExtra(\"mobile\");\r\n\r\n        auth=FirebaseAuth.getInstance();\r\n\r\n        /*PhoneAuthProvider.getInstance().verifyPhoneNumber(\r\n                phoneNumber,                     // Phone number to verify\r\n                60,                           // Timeout duration\r\n                TimeUnit.SECONDS,                // Unit of timeout\r\n                OtpVerification.this,        // Activity (for callback binding)\r\n                mCallback);*/\r\n        PhoneAuthOptions.newBuilder(auth)\r\n                .setPhoneNumber(phoneNumber)\r\n                .setTimeout(60L,TimeUnit.SECONDS)\r\n                .setActivity(this)\r\n                .setCallbacks(mCallback);\r\n\r\n        btnSignIn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                otp=etOTP.getText().toString();\r\n\r\n                PhoneAuthCredential credential = PhoneAuthProvider.getCredential(verificationCode, otp);\r\n\r\n                SignInWithPhone(credential);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void SignInWithPhone(PhoneAuthCredential credential) {\r\n        auth.signInWithCredential(credential)\r\n                .addOnCompleteListener(new OnCompleteListener<AuthResult>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<AuthResult> task) {\r\n                        if (task.isSuccessful()) {\r\n                            startActivity(new Intent(OtpVerification.this,RegisterActivity.class));\r\n                            finish();\r\n                        } else {\r\n                            Toast.makeText(OtpVerification.this,\"Incorrect OTP\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void findViews() {\r\n        btnSignIn=findViewById(R.id.verify_button);\r\n\r\n        etOTP=findViewById(R.id.etOtp);\r\n    }\r\n\r\n    private void StartFirebaseLogin() {\r\n\r\n        auth = FirebaseAuth.getInstance();\r\n        mCallback = new PhoneAuthProvider.OnVerificationStateChangedCallbacks() {\r\n\r\n            @Override\r\n            public void onVerificationCompleted( PhoneAuthCredential phoneAuthCredential) {\r\n                Toast.makeText(OtpVerification.this,\"verification completed\",Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n            @Override\r\n            public void onVerificationFailed(FirebaseException e) {\r\n                Toast.makeText(OtpVerification.this,\"verification failed\",Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n            @Override\r\n            public void onCodeSent(String s,  PhoneAuthProvider.ForceResendingToken forceResendingToken) {\r\n                super.onCodeSent(s, forceResendingToken);\r\n                verificationCode = s;\r\n                Toast.makeText(OtpVerification.this,\"Code sent\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        };\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        ;\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/womensafety/Activities/OtpVerification.java	(revision d9560544c30062d95cbc635e5fb7184697029af3)
+++ app/src/main/java/com/example/womensafety/Activities/OtpVerification.java	(date 1619236850466)
@@ -55,7 +55,7 @@
                 OtpVerification.this,        // Activity (for callback binding)
                 mCallback);*/
         PhoneAuthOptions.newBuilder(auth)
-                .setPhoneNumber(phoneNumber)
+                .setPhoneNumber("+91"+phoneNumber)
                 .setTimeout(60L,TimeUnit.SECONDS)
                 .setActivity(this)
                 .setCallbacks(mCallback);
